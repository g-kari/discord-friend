---
layout: default
title: 管理ダッシュボード
parent: 機能ガイド
nav_order: 5
description: "Discord AI Voice Botの管理ダッシュボード機能"
permalink: /features/admin-dashboard/
---

# 管理ダッシュボード
{: .fs-9 }

管理者向けボット管理機能
{: .fs-6 .fw-300 }

管理ダッシュボードは、サーバー管理者がボットの設定やユーザーデータを管理するための機能セットです。これらのコマンドは管理者権限を持つユーザーのみが使用できます。

## 機能一覧

管理ダッシュボードには以下の機能が含まれています：

1. **ユーザー一覧** - 登録されているユーザーとその設定を表示
2. **ユーザー設定リセット** - 特定ユーザーの設定をリセット
3. **データベース統計** - ボットのデータベース使用状況を確認
4. **古い会話履歴の削除** - 特定期間より古い会話履歴を削除

## 管理コマンド

### ユーザー管理

#### `/admin_list_users`

登録されている全ユーザーとその設定の一覧を表示します。

**使用例:**
```
/admin_list_users
```

**表示される情報:**
- ユーザー名とID
- カスタムプロンプト設定の有無
- 録音設定（有効/無効）
- キーワードトリガー設定
- 保存されているメッセージ数

**注意事項:**
- 大量のユーザーがいる場合、レスポンスが複数のメッセージに分割されることがあります
- このコマンドは他のユーザーには表示されません（ephemeralメッセージ）

#### `/admin_reset_user`

指定したユーザーの設定をリセットします。

**パラメータ:**
- `user_id` - リセットするユーザーのDiscord ID

**使用例:**
```
/admin_reset_user user_id:123456789012345678
```

**リセットされる設定:**
- カスタムプロンプト設定
- 録音設定

**注意事項:**
- 会話履歴は削除されません（履歴を削除するには `/admin_prune_history` を使用）
- リセットは元に戻せないため、実行前に確認してください

### システム管理

#### `/admin_db_stats`

ボットのデータベース統計情報を表示します。

**使用例:**
```
/admin_db_stats
```

**表示される情報:**
- 保存されている会話履歴の総数
- ユニークユーザー数
- カスタムプロンプトを設定しているユーザー数
- 録音設定をカスタマイズしているユーザー数
- 最も古いメッセージと最新メッセージの日時

#### `/admin_prune_history`

指定した日数より古い会話履歴を削除します。

**パラメータ:**
- `days` - 何日前より古い履歴を削除するか（例：30）

**使用例:**
```
/admin_prune_history days:30
```

**注意事項:**
- 削除は元に戻せないため、実行前に `/admin_db_stats` で確認することをお勧めします
- 削除完了後、削除されたレコード数が表示されます

## 管理ダッシュボードの活用方法

### ユーザーサポート

1. ユーザーが設定の問題を報告した場合、`/admin_list_users` で現在の設定を確認
2. 必要に応じて `/admin_reset_user` でユーザー設定をリセット

### データベースメンテナンス

1. 定期的に `/admin_db_stats` で使用状況を確認
2. サーバーリソースを節約するため、古いデータは `/admin_prune_history` で定期的にクリーンアップ

### トラブルシューティング

ボットの動作が遅い場合やエラーが発生する場合：

1. `/admin_db_stats` でデータベースサイズを確認
2. データベースが大きくなりすぎている場合は `/admin_prune_history` で古いデータを削除

## セキュリティ上の注意点

- これらのコマンドはDiscordサーバーの管理者権限を持つユーザーのみが使用できます
- ユーザー情報へのアクセスはDiscordのプライバシーポリシーに従って行ってください
- データの削除は慎重に行い、必要に応じてバックアップを作成してください